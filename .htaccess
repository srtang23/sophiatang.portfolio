# Enable URL rewriting
RewriteEngine On

# Test if .htaccess is working - remove this after testing
# If you see "HTACCESS_WORKS" in the URL, it's working
# RewriteRule ^test-htaccess$ test-htaccess.html [L]

# Redirect .html extensions in /work/ to clean URLs (301 permanent redirect)
RewriteCond %{THE_REQUEST} /work/([^.]+)\.html [NC]
RewriteRule ^work/ /work/%1? [NC,L,R=301]

# Rewrite clean URLs in /work/ to .html files internally
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^work/(sprout|spring|turtlup|hcde351)/?$ work/$1.html [L]

# Redirect .html extensions to clean URLs for other pages (301 permanent redirect)
RewriteCond %{THE_REQUEST} /([^.]+)\.html [NC]
RewriteCond %{REQUEST_URI} !^/work/
RewriteRule ^ /%1? [NC,L,R=301]

# Rewrite clean URLs to .html files internally (for non-work pages like /about)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/work/
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.*)$ $1.html [L]

# Handle root/index page
RewriteRule ^$ index.html [L]
